(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{34:function(n,e,t){n.exports=t.p+"static/media/lock.5005dbcc.gif"},41:function(n,e,t){n.exports=t.p+"static/media/bunq.139cf12c.svg"},44:function(n,e,t){n.exports=t(71)},71:function(n,e,t){"use strict";t.r(e);var o=t(0),r=t.n(o),a=t(33),c=t.n(a),i=t(1),l=t(38),s=t(8),u=t(11),d=t(12),f=t(14),p=t(13),b=t(15),g=t(34),m=t.n(g),h=t(2);function v(){var n=Object(i.a)(["\nmargin: 0 5px;\nbox-shadow: 0px 10px 18px -7px #276873;\nbackground:linear-gradient(to bottom, #599bb3 5%, #408c99 100%);\nbackground-color:#599bb3;\nborder-radius:5px;\ndisplay:inline-block;\ncursor:pointer;\ncolor:#ffffff;\nfont-size:16px;\nfont-weight:bold;\npadding:15px;\ntext-decoration:none;\ntext-shadow:0px 1px 0px #3d768a;\nborder:none;\n\n\n&:hover{\n    background:linear-gradient(to bottom, #408c99 5%, #599bb3 100%);\n\tbackground-color:#408c99;\n}\n&:active{\n    position:relative;\n\ttop:1px;\n}\n\n"]);return v=function(){return n},n}function x(){var n=Object(i.a)(["\n  text-align:center;\n  margin:auto;\n  font-size: 14px;\n  line-height: 50px;\n  border: none;\n  border-radius: 5px;\n  &:placeholder{\n    color: #B0BEC5;\n  }\n\n  &:focus{\n    outline: none;\n  }\n"]);return x=function(){return n},n}function C(){var n=Object(i.a)(["\ntext-align:center;\n\n"]);return C=function(){return n},n}function E(){var n=Object(i.a)(["\nfont-size:18px;\ncolor:#fff;\n "]);return E=function(){return n},n}function k(){var n=Object(i.a)(["\nwidth:100%;\nbackground-color :#e96361;\nheight:90vh;\n"]);return k=function(){return n},n}function w(){var n=Object(i.a)(["\nheight:350px;\n"]);return w=function(){return n},n}function O(){var n=Object(i.a)(["\ndisplay:flex;\njustify-content:center;\n\n"]);return O=function(){return n},n}var j=h.b.div(O()),y=h.b.img(w()),I=h.b.div(k()),M=h.b.p(E()),S=h.b.div(C()),U=h.b.input(x()),F=h.b.button(v()),L=function(n){function e(n){var t;return Object(u.a)(this,e),(t=Object(f.a)(this,Object(p.a)(e).call(this,n))).getUserId=function(n){console.log(n),t.setState({userId:n})},t.setUserIdQueryParamater=function(){t.props.history.push("/inbox/id=".concat(t.state.userId))},t.state={userId:0},t}return Object(b.a)(e,n),Object(d.a)(e,[{key:"render",value:function(){var n=this;return r.a.createElement(I,null,r.a.createElement(j,null,r.a.createElement(y,{src:m.a,alt:"lock"})),r.a.createElement(S,null,r.a.createElement(M,null,"Please Enter Your User Id To Accses Chat App"),r.a.createElement(U,{onChange:function(e){return n.getUserId(e.target.value)},type:"number",placeholder:"user id"}),r.a.createElement(F,{disabled:!this.state.userId,onClick:function(){return n.setUserIdQueryParamater()}},"Login")))}}]),e}(o.Component);function P(){var n=Object(i.a)(["\ncolor: #aaa;\nfloat: right;\nfont-size: 28px;\nfont-weight: bold;\n\n&:hover{\n    color: black;\n    text-decoration: none;\n    cursor: pointer;\n}\n&:focus{\n    color: black;\n    text-decoration: none;\n    cursor: pointer;\n}\n\n"]);return P=function(){return n},n}function A(){var n=Object(i.a)(["\n\nbackground-color: #fefefe;\nmargin: 15% auto; /* 15% from the top and centered */\npadding: 20px;\nborder: 1px solid #888;\nwidth: 80%; /* Could be more or less, depending on screen size */\n"]);return A=function(){return n},n}function z(){var n=Object(i.a)(["\ndisplay: ","\nposition: fixed; /* Stay in place */\nz-index: 1; /* Sit on top */\nleft: 0;\ntop: 0;\nwidth: 100%; /* Full width */\nheight: 100%; /* Full height */\noverflow: auto; /* Enable scroll if needed */\nbackground-color: rgb(0,0,0); /* Fallback color */\nbackground-color: rgba(0,0,0,0.4); /* Black w/ opacity */\n\n"]);return z=function(){return n},n}var G=h.b.div(z(),(function(n){return n.closed?"block":"none"})),T=h.b.div(A()),N=h.b.span(P()),B=function(n){var e=n.closed,t=n.closeModal,o=n.modalContent;return r.a.createElement(G,{closed:e},r.a.createElement(T,null,r.a.createElement(N,{onClick:function(){return t()}},"\xd7"),o))},D=t(37),R=t.n(D).a.create({baseURL:"http://assignment.bunq.com"});function q(){var n=Object(i.a)(["\n\ncolor:#808080\ntext-align:center;\nfont-size:18px;\n"]);return q=function(){return n},n}function H(){var n=Object(i.a)(["\ncolor:#808080\npadding:5px;\n\n"]);return H=function(){return n},n}function J(){var n=Object(i.a)(["\n  text-align:center;\n  margin:auto;\n  font-size: 14px;\n  line-height: 50px;\n  border-radius: 5px;\n  &:placeholder{\n    color: #B0BEC5;\n  }\n\n  &:focus{\n    outline: none;\n  }\n"]);return J=function(){return n},n}function Q(){var n=Object(i.a)(["\nfont-size:18px;\n\n"]);return Q=function(){return n},n}function W(){var n=Object(i.a)(["\nfont-size:18px;\ncolor:red;\n"]);return W=function(){return n},n}function Y(){var n=Object(i.a)(["\n\n\n"]);return Y=function(){return n},n}function _(){var n=Object(i.a)(["\n  font-weight: 500;\n  color :",";\n  height: 50px;\n  width :","\n\n  "]);return _=function(){return n},n}function $(){var n=Object(i.a)(["\nborder: 1px solid #fff;\n&:hover {\n    background-color: #f4f7fd;\n    cursor:pointer;\n}\n","\n"]);return $=function(){return n},n}function K(){var n=Object(i.a)(["\n  background-color: #f4f7fd;\n  \n"]);return K=function(){return n},n}function V(){var n=Object(i.a)(["\n  width: 100%;\n  margin: auto;\n  text-transform: capitalize;\n  text-align: center;\n  margin-top: 5px;\n  border: solid 1px rgb(224, 224, 224);\n  border-collapse: collapse;\n  font-size: 15px;\n\n"]);return V=function(){return n},n}function X(){var n=Object(i.a)(["\ndisplay:inline-block;\ncursor:pointer;\nmargin:10px;\nbox-shadow: 0px 10px 18px -7px #276873;\nbackground:linear-gradient(to bottom, #599bb3 5%, #408c99 100%);\nbackground-color:#599bb3;\nborder-radius:5px;\ncursor:pointer;\ncolor:#ffffff;\nfont-size:16px;\nfont-weight:bold;\npadding:15px;\ntext-decoration:none;\ntext-shadow:0px 1px 0px #3d768a;\nborder:none;\n\n\n&:hover{\n    background:linear-gradient(to bottom, #408c99 5%, #599bb3 100%);\n\tbackground-color:#408c99;\n}\n&:active{\n    position:relative;\n\ttop:1px;\n}\n\n"]);return X=function(){return n},n}function Z(){var n=Object(i.a)(["\n\nmargin:2px;\n"]);return Z=function(){return n},n}var nn=h.b.div(Z()),en=h.b.button(X()),tn=h.b.table(V()),on=h.b.thead(K()),rn=h.b.tr($(),(function(n){return n.pagination?"\n    display: flex;\n    justify-content: center;\n\n":""})),an=h.b.th(_(),(function(n){return n.transperent?"#fff":"#98999b"}),(function(n){return n.width?n.width:"7.75%"})),cn=h.b.tbody(Y()),ln=h.b.span(W()),sn=h.b.p(Q()),un=h.b.input(J()),dn=h.b.span(H()),fn=h.b.p(q()),pn=function(n){function e(n){var t;return Object(u.a)(this,e),(t=Object(f.a)(this,Object(p.a)(e).call(this,n))).getAllUsers=function(){R.get("/users").then((function(n){console.log(n.data),t.setState({allUsers:n.data})})).catch((function(n){return console.log(n,"error")}))},t.onUserCheck=function(n){console.log(n,"checked");var e=t.state.selectedUsers;e.push(n),console.log(e.join()),setTimeout((function(){t.setState({selectedUsers:e})}),300)},t.handleGroupNameChange=function(n){setTimeout((function(){t.setState({groupName:n})}),300)},t.createGroupConversationModalContent=function(){var n=t.state.allUsers;return r.a.createElement("div",null,r.a.createElement(fn,null,"Create a group conversation"),r.a.createElement(un,{type:"text",onChange:function(n){return t.handleGroupNameChange(n.target.value)},placeholder:"group name"}),n&&n.map((function(n,e){return r.a.createElement(nn,{key:e},r.a.createElement(un,{onClick:function(n){return t.onUserCheck(n.target.value)},type:"checkbox",value:n.id}),r.a.createElement(dn,null,n.name))})),r.a.createElement(en,{onClick:function(){return t.createGroup()}},"Create Group Conversation"))},t.createPersonalConversationModalContent=function(){var n=t.state.allUsers;return r.a.createElement("div",null,r.a.createElement(fn,null,"Create a Personal conversation"),n&&n.map((function(n,e){return r.a.createElement(nn,{key:e},r.a.createElement(un,{onClick:function(n){return t.onUserCheck(n.target.value)},type:"checkbox",value:n.id}),r.a.createElement(dn,null,n.name))})),r.a.createElement(en,{onClick:function(){return t.createPersonalConversation()}},"Create Personal Conversation"))},t.createPersonalConversation=function(){var n={users:t.state.selectedUsers.join()};R.post("/conversation/personal",n).then((function(n){t.setState({openCreatePersonalChatModal:!1}),t.getAllConversationsForUser(t.state.userId),console.log(n)})).catch((function(n){return console.log(n,"error")}))},t.createGroup=function(){var n={name:t.state.groupName,users:t.state.selectedUsers.join()};R.post("/conversation/group",n).then((function(n){t.setState({openCreateGroupChatModal:!1}),t.getAllConversationsForUser(t.state.userId),console.log(n)})).catch((function(n){return console.log(n,"error")}))},t.closeCreateGroupChatModal=function(){t.setState({openCreateGroupChatModal:!1})},t.closeCreatePersonalChatModal=function(){t.setState({openCreatePersonalChatModal:!1})},t.openConversation=function(n){console.log(n),t.props.history.push("/conversation/id=".concat(n,",userId=").concat(t.state.userId))},t.getAllConversationsForUser=function(n){R.get("/conversation/user/".concat(n)).then((function(n){n&&n.data&&(t.setState({conversations:n.data.reverse()}),console.log(n,"all conversations for user"))})).catch((function(n){return console.log("error",n)}))},t.createGroupChatModal=function(){console.log("open create group modal"),t.setState({openCreateGroupChatModal:!0})},t.createPersonalChatModal=function(){console.log("open personal group modal"),t.setState({openCreatePersonalChatModal:!0})},t.state={userId:0,conversations:[],userName:"",openCreateGroupChatModal:!1,openCreatePersonalChatModal:!1,allUsers:[],selectedUsers:[],groupName:""},t}return Object(b.a)(e,n),Object(d.a)(e,[{key:"componentDidMount",value:function(){this.props.location&&this.props.location.pathname&&(console.log(this.props.location.pathname),this.getUserIdFromURL(this.props.location.pathname)),this.getAllUsers()}},{key:"getUserDetails",value:function(n){var e=this;R.get("/user/".concat(n)).then((function(n){console.log(n.data),e.setState({userName:n.data.name})}))}},{key:"getUserIdFromURL",value:function(n){var e=n.indexOf("=")+1;if(e){var t=n.substr(e);t=parseInt(t),this.setState({userId:t}),this.getAllConversationsForUser(t),this.getUserDetails(t)}}},{key:"render",value:function(){var n=this,e=this.state,t=e.conversations,o=e.userName,a=e.openCreateGroupChatModal,c=e.openCreatePersonalChatModal;return r.a.createElement("div",null,r.a.createElement(en,{onClick:function(){return n.createGroupChatModal()}},"Create a group Chat"),r.a.createElement(en,{onClick:function(){return n.createPersonalChatModal()}},"Create a personal Chat"),r.a.createElement(sn,null,"Hey ",o,",You Have ",r.a.createElement(ln,null,t?t.length:"")," ","Conversations"),r.a.createElement(tn,null,r.a.createElement(on,null,r.a.createElement(rn,null,r.a.createElement(an,null,"Name"),r.a.createElement(an,null,"Last seen"),r.a.createElement(an,null,"Type"),r.a.createElement(an,null,"User role"),r.a.createElement(an,null,"Number of members"))),r.a.createElement(cn,null,t&&t.map((function(e,t){return r.a.createElement(rn,{onClick:function(){return n.openConversation(e.conversation.conversationId)},key:t},r.a.createElement(an,null,e&&e.conversation&&e.conversation.name?e.conversation.name:"No name Available"),r.a.createElement(an,null,e&&e.conversation&&e.conversation.lastseen?e.conversation.lastseen:"Last seen stamp not available"),r.a.createElement(an,null,e&&e.conversation&&e.conversation.type&&1==e.conversation.type?"Personal conversation":e&&e.conversation&&e.conversation.type&&2==e.conversation.type?"Group conversation":"Conversation type not available"),r.a.createElement(an,null,e&&e.conversation&&e.conversation.is_owner&&1==e.conversation.is_owner?"Admin":e&&e.conversation&&e.conversation.type&&0==e.conversation.type?"Member":"User role not available"),r.a.createElement(an,null,e&&e.users?e.users.length:"No members"))})))),r.a.createElement(B,{closeModal:this.closeCreateGroupChatModal,closed:a,modalContent:this.createGroupConversationModalContent()}),r.a.createElement(B,{closeModal:this.closeCreatePersonalChatModal,closed:c,modalContent:this.createPersonalConversationModalContent()}))}}]),e}(o.Component);function bn(){var n=Object(i.a)(["\ncolor:#808080;\n\n"]);return bn=function(){return n},n}function gn(){var n=Object(i.a)(["\nwidth:95%;\nmargin:auto;\npadding:1px 5px;\nbackground-color:#f4f7fd;\nmargin:5px;\nborder-radius: 5px;\nmin-height:50px;\n"]);return gn=function(){return n},n}function mn(){var n=Object(i.a)(["\nheight:70vh;\nbackground-color:#fff;\noverflow:auto;\nborder:solid 1px #f4f7fd;\n\n"]);return mn=function(){return n},n}function hn(){var n=Object(i.a)(["\nmargin: 0 5px;\nbox-shadow: 0px 10px 18px -7px #276873;\nbackground:linear-gradient(to bottom, #599bb3 5%, #408c99 100%);\nbackground-color:#599bb3;\nborder-radius:5px;\ndisplay:inline-block;\ncursor:pointer;\ncolor:#ffffff;\nfont-size:16px;\nfont-weight:bold;\npadding:15px;\ntext-decoration:none;\ntext-shadow:0px 1px 0px #3d768a;\nborder:none;\n\n\n&:hover{\n    background:linear-gradient(to bottom, #408c99 5%, #599bb3 100%);\n\tbackground-color:#408c99;\n}\n&:active{\n    position:relative;\n\ttop:1px;\n}\n\n\n\n"]);return hn=function(){return n},n}function vn(){var n=Object(i.a)(["\nwidth:90%;\nmargin:auto;\nfont-size: 14px;\nline-height: 50px;\nborder-radius: 5px;\n&:placeholder{\n  color: #B0BEC5;\n}\n\n&:focus{\n  outline: none;\n}\n"]);return vn=function(){return n},n}function xn(){var n=Object(i.a)(["\ntext-align:center;\n\n"]);return xn=function(){return n},n}function Cn(){var n=Object(i.a)(["\nfont-size:18px;\ncolor:#8b8b8b;\n"]);return Cn=function(){return n},n}function En(){var n=Object(i.a)(["\ncolor:#808080;\n\n\n"]);return En=function(){return n},n}function kn(){var n=Object(i.a)(["\ncolor:#808080;\ntext-align:right;\n"]);return kn=function(){return n},n}var wn=h.b.p(kn()),On=h.b.p(En()),jn=h.b.p(Cn()),yn=h.b.div(xn()),In=h.b.input(vn()),Mn=h.b.button(hn()),Sn=h.b.div(mn()),Un=h.b.div(gn()),Fn=h.b.p(bn()),Ln=function(n){function e(n){var t;return Object(u.a)(this,e),(t=Object(f.a)(this,Object(p.a)(e).call(this,n))).putLastSeenTimeStamp=function(){var n={lastseen:Date.now().toString()};R.put("/conversation/".concat(t.state.conversationId,"/seen/").concat(t.state.userId),n).then((function(n){console.log(n," seen"),t.setState({lastseen:n.data.lastseen})})).catch((function(n){return console.log(n,"error")}))},t.getLastSeenTimeStamp=function(){R.get("/conversation/".concat(t.state.conversationId,"/lastseen/").concat(t.state.userId)).then((function(n){console.log(n,"last seen")})).catch((function(n){return console.log(n,"error")}))},t.getAllMessagesAfterSendingAMessage=function(n){R.get("/conversation/".concat(t.state.conversationId,"/new/").concat(n)).then((function(n){console.log(n)})).catch((function(n){return console.log("error",n)}))},t.getMessage=function(n){t.setState({message:n})},t.sendMessage=function(){var n={message:t.state.message,senderId:t.state.conversationId};R.post("/conversation/".concat(t.state.conversationId,"/message/send"),n).then((function(n){t.setState({message:n.data}),t.getLimitedAmmountOfMessages(t.state.conversationId),console.log(n)})).catch((function(n){return console.log("error",n)}))},t.state={message:"",conversationId:0,allMessages:[],userId:0,lastseen:""},t}return Object(b.a)(e,n),Object(d.a)(e,[{key:"componentDidMount",value:function(){this.props.location&&this.props.location.pathname&&(console.log(this.props.location.pathname),this.getConversationIdFromURL(this.props.location.pathname),this.getUserIdFromURL(this.props.location.pathname))}},{key:"getLimitedAmmountOfMessages",value:function(n){var e=this;R.get("/conversation/".concat(n,"/message/limited?limit=100000&offset=0")).then((function(n){e.setState({allMessages:n.data.reverse(),message:""}),console.log(n)})).catch((function(n){return console.log("error",n)}))}},{key:"getConversationIdFromURL",value:function(n){var e=this,t=n.indexOf("=")+1;if(t){var o=n.substr(t),r=o.indexOf(",");o=o.slice(0,r),o=parseInt(o),console.log(o,"conversation Id"),o=parseInt(o),this.setState({conversationId:o},(function(){return e.putLastSeenTimeStamp()})),this.getLimitedAmmountOfMessages(o)}}},{key:"getUserIdFromURL",value:function(n){var e=this;console.log(n);var t=n.indexOf(",")+8;if(console.log(t),t){var o=n.substr(t);o=parseInt(o),this.setState({userId:o},(function(){return e.getLastSeenTimeStamp()}))}}},{key:"render",value:function(){var n=this,e=this.state.allMessages;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fn,null,"Last Seen on ",this.state.lastseen),r.a.createElement(Mn,{onClick:function(){n.getLimitedAmmountOfMessages(n.state.conversationId)}},"Refresh Conversation"),r.a.createElement(Sn,null,e&&e.length?e.map((function(n,e){return r.a.createElement(Un,{key:e},r.a.createElement(On,null,n.message),r.a.createElement(wn,null,n.timestamp))})):""),r.a.createElement(yn,null,r.a.createElement(jn,null,"Send message to user"),r.a.createElement(In,{onChange:function(e){return n.getMessage(e.target.value)},type:"text",value:this.state.message||"",placeholder:" write your message here..."}),r.a.createElement(Mn,{onClick:function(){return n.sendMessage()}},"Send")))}}]),e}(o.Component),Pn=function(){return r.a.createElement(l.a,null,r.a.createElement(s.a,{exact:!0,path:"/",component:L}),r.a.createElement(s.a,{path:"/inbox",component:pn}),r.a.createElement(s.a,{path:"/conversation",component:Ln}))},An=t(41),zn=t.n(An);function Gn(){var n=Object(i.a)(["\ndisplay: inline-block;\nfloat: left;\nwidth: calc(100% / 12);\nheight: 100%;\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n\n\n\n"]);return Gn=function(){return n},n}function Tn(){var n=Object(i.a)(["\nwidth: 100%;\nheight: 10px;\nbackground-size: 100%;\nbackground-position: top center;\n"]);return Tn=function(){return n},n}function Nn(){var n=Object(i.a)(["\n    height:35px;\n"]);return Nn=function(){return n},n}var Bn=h.b.img(Nn()),Dn=h.b.div(Tn()),Rn=h.b.div(Gn(),(function(n){return n.rainbowOne&&"background-color: #238647;"}),(function(n){return n.rainbowTwo&&"background-color: #2F9B47;"}),(function(n){return n.rainbowThree&&"background-color: #62B64F;"}),(function(n){return n.rainbowFour&&"background-color: #89CC53;"}),(function(n){return n.rainbowFive&&"background-color: #3DB8AD;"}),(function(n){return n.rainbowSix&&"background-color: #3394D7;"}),(function(n){return n.rainbowSeven&&"background-color: #2872BC;"}),(function(n){return n.rainbowEight&&"background-color: #1D5C84;"}),(function(n){return n.rainbowNine&&"background-color: #993233;"}),(function(n){return n.rainbowTen&&"background-color: #E13030;"}),(function(n){return n.rainbowEleven&&"background-color: #F28825;"}),(function(n){return n.rainbowTwelve&&"background-color: #F5C836;"})),qn=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Bn,{src:zn.a,alt:"brand"}),r.a.createElement(Dn,null,r.a.createElement(Rn,{rainbowOne:!0}),r.a.createElement(Rn,{rainbowTwo:!0}),r.a.createElement(Rn,{rainbowThree:!0}),r.a.createElement(Rn,{rainbowFour:!0}),r.a.createElement(Rn,{rainbowFive:!0}),r.a.createElement(Rn,{rainbowSix:!0}),r.a.createElement(Rn,{rainbowSeven:!0}),r.a.createElement(Rn,{rainbowEight:!0}),r.a.createElement(Rn,{rainbowNine:!0}),r.a.createElement(Rn,{rainbowTen:!0}),r.a.createElement(Rn,{rainbowEleven:!0}),r.a.createElement(Rn,{rainbowTwelve:!0})))};function Hn(){var n=Object(i.a)(["\n  body {\n    @import url('https://fonts.googleapis.com/css?family=Roboto&display=swap');\n    font-family: 'Notable', sans-serif;\n  }\n"]);return Hn=function(){return n},n}var Jn=Object(h.a)(Hn());var Qn=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(qn,null),r.a.createElement(Pn,null),r.a.createElement(Jn,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Qn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()}))}},[[44,1,2]]]);
//# sourceMappingURL=main.eb114e50.chunk.js.map